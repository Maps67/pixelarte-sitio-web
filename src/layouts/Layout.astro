---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import '@/styles/global.css';

interface Props {
    title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="description" content="Pixelarte Studio: Diseño Web con Precisión Digital." />
        <meta name="viewport" content="width=device-width" />
        <meta name="generator" content={Astro.generator} />
        <title>{title}</title>
        
        {/* -- Favicon y Touch Icons Optimizados -- */}
        <link rel="icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
        <link rel="manifest" href="/site.webmanifest" />
        <meta name="msapplication-TileColor" content="#da532c" />
        <meta name="theme-color" content="#ffffff" />
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />
    </head>
    <body>
        <Header />
        <main>
            <slot />
        </main>
        <Footer />

        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js"></script>

        <!-- ✅ INICIO: SCRIPT DE ANIMACIÓN GLOBAL PARA EL FOOTER -->
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                gsap.registerPlugin(ScrollTrigger);
        
                // Selecciona la sección del QR en el Footer
                const qrSection = document.querySelector('.qr-section');
                
                // Se asegura de que el elemento exista antes de intentar animarlo
                if (qrSection) {
                    gsap.from(qrSection, {
                        y: 50,
                        opacity: 0,
                        duration: 1,
                        ease: "power3.out",
                        scrollTrigger: {
                            trigger: qrSection,
                            start: "top 95%", // La animación empieza cuando el QR está casi visible
                            toggleActions: "play none none none"
                        }
                    });
                }
            });
        </script>
        <!-- FIN: SCRIPT DE ANIMACIÓN GLOBAL -->
    </body>
</html>


