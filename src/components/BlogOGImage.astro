---
// src/components/BlogOGImage.astro
import { read } from 'fs/promises';
import { fileURLToPath } from 'url';

// Acepta el título del post
interface Props {
  title: string;
}
const { title } = Astro.props;

// Lee los archivos de fuentes que descargamos
// Usamos fileURLToPath y read() para obtenerlos de forma que Satori pueda usarlos
const playfairBold = await read(
  fileURLToPath(new URL('../../public/fonts/PlayfairDisplay-Bold.ttf', import.meta.url))
);
const interRegular = await read(
  fileURLToPath(new URL('../../public/fonts/Inter-Regular.ttf', import.meta.url))
);

// Obtenemos la ruta del logo (asumiendo que está en public/logo-transparente.png)
// Satori necesita una URL completa para las imágenes, pero la construiremos en el endpoint
const logoPath = "/logo-transparente.png"; 

// Nota: Todo el CSS debe estar "inline" o en etiquetas <style>
// Satori usa un subconjunto de CSS (Flexbox es ideal)
---
<div
  style={{
    display: 'flex',
    flexDirection: 'column',
    justifyContent: 'space-between',
    width: '1200px',
    height: '630px',
    padding: '60px',
    backgroundColor: '#111827', // Tu color --color-fondo-oscuro
    fontFamily: '"Inter"',
    color: '#F9FAFB', // Tu color --color-fondo-claro
  }}
>
  <h1
    style={{
      fontFamily: '"Playfair Display"',
      fontSize: '72px',
      lineHeight: '1.2',
      fontWeight: '700',
      color: '#F9FAFB',
    }}
  >
    {title}
  </h1>

  <div
    style={{
      display: 'flex',
      justifyContent: 'space-between',
      alignItems: 'center',
      width: '100%',
    }}
  >
    <div
      style={{
        display: 'flex',
        flexDirection: 'column',
      }}
    >
      <p style={{ fontSize: '28px', color: '#9CA3AF' }}>Marco A. Portillo</p>
      <p style={{ fontSize: '32px', color: '#F9FAFB', fontWeight: 'bold' }}>
        Estrategia "Insider"
      </p>
    </div>
    
    <span
      style={{
        fontSize: '32px',
        color: '#2563EB', // Tu color --color-acento
        fontWeight: 'bold',
      }}
    >
      Pixelarte Studio
    </span>
  </div>
</div>

<style
  lang="css"
  set:html={`
    @font-face {
      font-family: 'Playfair Display';
      font-style: 'normal';
      font-weight: '700';
      src: url(${playfairBold});
    }
    @font-face {
      font-family: 'Inter';
      font-style: 'normal';
      font-weight: '400';
      src: url(${interRegular});
    }
  `}
/>